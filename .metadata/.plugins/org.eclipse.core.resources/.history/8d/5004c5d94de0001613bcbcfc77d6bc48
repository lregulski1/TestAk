package com.akamai.tests;

import org.openqa.selenium.WebDriver;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.support.PageFactory;
import org.testng.Assert;
import org.testng.annotations.AfterMethod;
import org.testng.annotations.BeforeMethod;
import org.testng.annotations.Test;

import automation.pages.AkamaiCarrersMainPage;
import automation.pages.AkamaiCarrersSerachResultPage;

public class Search_Test_Jobs {
	
	public WebDriver driver;
	AkamaiCarrersMainPage ACarrersMainPage;
	AkamaiCarrersSerachResultPage ACarrersSearchPage;
	
	
	@BeforeMethod(alwaysRun = true)
	public void setup(){
		System.setProperty("webdriver.chrome.driver", "E:\\Selenium\\chromedriver_win32_2_27\\chromedriver.exe");
		this.driver = new ChromeDriver();	
		
		ACarrersMainPage = PageFactory.initElements(driver, AkamaiCarrersMainPage.class);
		ACarrersSearchPage = PageFactory.initElements(driver, AkamaiCarrersSerachResultPage.class);
		driver.get(ACarrersMainPage.PAGE_URL);
		Assert.assertEquals(driver.getTitle(), ACarrersMainPage.PAGE_TITLE);
		ACarrersMainPage.enterSearchString("Test");
		ACarrersMainPage.selectLocation("Krakow");
		ACarrersMainPage.clickSearchButton();
		
	}

	@AfterMethod(alwaysRun = true)
	public void terdown(){
		driver.quit();		
	}
	
	
	@Test
	public void checkNumberOfResults (){	
	ACarrersSearchPage.checkNumberOfResults("11");
	}
	
	@Test
	public void checkNumberOfJobsPosted(){
		ACarrersSearchPage.numberOfResultsForString(5, "Software Development Engineer in Test");
	}

}
